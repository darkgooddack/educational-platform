## Регистрация пользователя (примерно)

1. API Gateway получает запрос на регистрацию через эндпоинт /register

2. API Gateway формирует сообщение с action="register" и отправляет его в RabbitMQ очередь "auth_queue"

3. Consumer в auth_service получает это сообщение и передает его в UserService

4. UserService:

> 1. Создает нового пользователя в базе данных
> 2. Хеширует пароль
> 3. Генерирует JWT токен
> 4. Сохраняет токен в Redis
> 5. Возвращает ответ с данными пользователя и токеном
> 6. Consumer отправляет ответ обратно в очередь RabbitMQ

5. API Gateway получает ответ и:

> 1. Кеширует данные пользователя в Redis
> 2. Возвращает успешный ответ клиенту

Таким образом выстраивается полный цикл регистрации пользователя через микросервисную архитектуру с использованием:

- FastAPI для API
- RabbitMQ для асинхронного взаимодействия между сервисами
- Redis для кеширования
- PostgreSQL для хранения данных пользователей